# 第八章：范畴论 —— 数学的「元语言」

> **本章导读**：范畴论是现代数学的「通用语言」。它不是具体的数学对象，而是描述各种数学结构之间关系的理论。在代数几何中，范畴论无处不在——从层论到上同调，从概形到导出范畴。这一章我们将从基础开始，为学习层论打下基础。

---

## 8.1 范畴的定义

### 8.1.1 什么是范畴？

> **范畴（Category）** 由以下组成：
> 1. **对象（Objects）** 的集合
> 2. **态射（Morphisms）** 的集合，对每个对象对 (A, B)，有一个态射集合 Hom(A, B)
> 3. **复合运算**：若 f: A → B，g: B → C，则 gf: A → C
> 
> 满足：
> - **结合律**：若 f: A → B，g: B → C，h: C → D，则 (hg)f = h(gf)
> - **单位元**：对每个对象 A，存在 1_A: A → A，使得 f·1_A = f，1_A·g = g

```text
简单说：范畴就是「对象 + 对象之间的箭头 + 箭头的复合规则」！

图示：
    A ──f──→ B ──g──→ C
    │
    │ gf
    ▼
    C

(gf): A → C
```

### 8.1.2 例子

| 范畴 | 对象 | 态射 |
|------|------|------|
| **Set** | 集合 | 函数 |
| **Group** | 群 | 群同态 |
| **Ring** | 环 | 环同态 |
| **Top** | 拓扑空间 | 连续映射 |
| **Vect** | 向量空间 | 线性变换 |
| **Mod-R** | 右R-模 | 模同态 |

```text
具体例子：Set 范畴
- 对象：所有集合
- 态射：集合之间的函数
- 单位态射：恒等函数 id_X(x) = x
- 复合：函数的复合
```

### 8.1.3 小的与局部的范畴

> 若对象的类是一个集合（不是真类），则范畴是**小的（small）**。

大多数我们用的范畴是「局部小的」：Hom(A, B) 是集合。

---

## 8.2 态射的性质

### 8.2.1 单态射与满态射

> **单态射（Monomorphism）**：f: A → B 满足，若 g₁, g₂: X → A 且 fg₁ = fg₂，则 g₁ = g₂。
> 
> **满态射（Epimorphism）**：f: A → B 满足，若 h₁, h₂: B → X 且 h₁f = h₂f，则 h₁ = h₂。

```text
在 Set 范畴中：
- 单态射 = 单射函数
- 满态射 = 满射函数

在 Group 范畴中：
- 单态射 = 单射群同态
- 满态射 = 满射群同态
```

### 8.2.2 同构

> **同构（Isomorphism）**：若存在 f: A → B 使得 gf = 1_B 且 fg = 1_A，则 f 是同构，记作 A ≅ B。

```text
在 Set 范畴中：
同构 = 双射（一一对应）

在 Group 范畴中：
同构 = 双射群同构
```

### 8.2.3 初始对象与终端对象

> **初始对象（Initial Object）**：对象 I 满足，对任意对象 X，存在唯一态射 I → X。
> 
> **终端对象（Terminal Object）**：对象 T 满足，对任意对象 X，存在唯一态射 X → T。

```text
在 Set 范畴中：
- 初始对象：空集 ∅（唯一的「到任何集合」的函数）
- 终端对象：任意单元素集 {*}（任何集合到它的唯一函数）

在 Group 范畴中：
- 初始对象 = 终端对象 = 平凡群 {e}
```

> 如果初始对象和终端对象相同，称为**零对象（Zero Object）**。

---

## 8.3 对偶范畴

### 8.3.1 定义

> **对偶范畴（Opposite Category）** C^op 的对象与 C 相同，但态射方向相反：
> 
> Hom_{C^op}(A, B) = Hom_C(B, A)

```text
例子：
- Set^op 的态射是「反向函数」——但这不是真正的函数！
- 这就是为什么我们用「形式」这个词
```

### 8.3.2 对偶原理

> **对偶原理**：范畴论中的任何命题，把「单态射」换成「满态射」，把「始对象」换成「终对象」，把箭头反向，就得到另一个真命题。

```text
这大大简化了证明！
```

---

## 8.4 函子：范畴之间的映射

### 8.4.1 函子的定义

> **函子（Functor）** F: C → D 是：
> 1. 对每个 C 中的对象 X，对应 D 中对象 F(X)
> 2. 对每个 C 中的态射 f: X → Y，对应 D 中态射 F(f): F(X) → F(Y)
> 满足：
> - F(1_X) = 1_{F(X)}
> - F(gf) = F(g)F(f)

```text
简单说：函子「保持结构」的映射！

图示：
    C:     A ──f──→ B
           │           │
          F│          F│
           ▼           ▼
    D:   F(A) ──F(f)──→ F(B)
```

### 8.4.2 例子

```text
例子1：忘却函子（Forgetful Functor）
U: Group → Set
- 把群映射到它的底层集合
- 把群同态映射到对应的函数

例子2：自由函子（Free Functor）
F: Set → Group
- F(X) = 自由群 generated by X
- 提供「最小」的群结构

例子3：Hom 函子
Hom(A, -): C → Set
- 把对象 X 映射到 Hom(A, X)
- 把态射 f: X → Y 映射到 推出映射
```

### 8.4.3 协变与反变函子

> **协变函子**：保持态射方向
> 
> **反变函子**：反转态射方向（F(f): F(B) → F(A)）

```text
例子：Hom(A, -) 是协变函子
      Hom(-, A) 是反变函子

反变 Hom 函子：
f: X → Y → F(f): Hom(Y, A) → Hom(X, A)
                    g↦g∘f
```

---

## 8.5 自然变换

### 8.5.1 定义

> 给定两个函子 F, G: C → D，**自然变换** η 是：
> - 对每个对象 X ∈ C，一个态射 η_X: F(X) → G(X)
> - 对每个态射 f: X → Y，满足 G(f) ∘ η_X = η_Y ∘ F(f)

```text
图示（自然性条件）：
     F(X) ──F(f)──→ F(Y)
       │                  │
      η_X                η_Y
       ▼                  ▼
     G(X) ──G(f)──→ G(Y)

交换 diagram！
```

### 8.5.2 例子

```text
例子：群到集合的自然变换
- F: Group → Set，F(G) = G（忘却函子）
- G: Group → Set，G(G) = G 的共轭类集合
- η_G: G → (G 的共轭类)
  这不是自然的！共轭类不保持同态
```

### 8.5.3 函子范畴

> 从 C 到 D 的所有函子构成范畴 **Fun(C, D)**，其态射是自然变换。

---

## 8.6 伴随函子

### 8.6.1 定义

> 函子 F: C → D 与 G: D → C **伴随**，记作 F ⊣ G，若存在自然同构：
> 
> Hom_D(F(C), D) ≅ Hom_C(C, G(D))

```text
F 叫左伴随，G 叫右伴随。

「左伴随保持余极限，右伴随保持极限」
```

### 8.6.2 例子

```text
例子1：自由-忘却伴随
F: Set → Group（自由函子）
G: Group → Set（忘却函子）

F ⊣ G：自由群是遗忘的最「自由」的方式

例子2：Hom-张量伴随
Hom_A(M ⊗_A N, P) ≅ Hom_A(M, Hom_A(N, P))
                     
这在代数几何中研究 Ext 函子时很重要！
```

---

## 8.7 极限与余极限

### 8.7.1 图表与锥

> **图表（Diagram）** 是范畴中的一个索引族对象。
> 
> **锥（Cone）** 是对图表中每个对象配一个顶点，和满足兼容条件的态射。

### 8.7.2 极限

> **极限（Limit）** 是到图表的「最具普遍性」的锥。

```text
例子：积（Product）
A × B 是满足「任何到 A 和 B 的映射唯一决定到 A×B 的映射」的对象

在 Set 范畴中：
A × B = 笛卡尔积

在 Group 范畴中：
A × B = 直积
```

### 8.7.3 余极限

> **余极限（Colimit）** 是从图表出发的「最具普遍性」的锥。

```text
例子：余积（Coproduct）
A ⊔ B 是满足「任何从 A 或 B 出发的映射唯一扩展到从 A ⊔ B 出发的映射」的对象

在 Set 范畴中：
A ⊔ B = 并集（不交并）

在 Group 范畴中：
A ⊔ B = 自由积
```

---

## 8.8 米田引理初步

### 8.8.1 可表函子

> **可表函子（Representable Functor）** 是 Hom 函子：
> 
> h^A(X) = Hom(A, X)

### 8.8.2 米田引理

> **米田引理（Yoneda Lemma）**：对任何函子 F: C → Set，有：
> 
> Nat(h^A, F) ≅ F(A)

```text
这意味着：
- 函子由其「可表子」决定
- 层论中非常重要的工具！
```

> 💡 在代数几何中，**可分层（Sheafifiable Presheaf）** 的研究中，米田引理无处不在。

---

## 8.9 范畴论在代数几何中的应用

> 💡 **核心应用**：
> 
> - **层范畴**：层的范畴是 **Top(X) 上的反变函子范畴**
> - **导出范畴**：D(X) 是复形范畴的商
> - **模的范畴**：模范畴是阿贝尔范畴
> - **概形的范畴**：Sch 是 Grothendieck 拓扑中的层

> 这些以后都会详细介绍！现在只需要有个印象即可。

---

## 8.10 习题

### 基础题

1. 验证 Set 范畴满足范畴的定义

2. 找出 Top 范畴中的始对象和终对象

3. 证明：在 Group 范畴中，单态射等价于单射同态

### 进阶题

4. 构造一个从 Ring 到 Set 的忘却函子，并描述其左伴随

5. 证明：伴随唯一（若 F ⊣ G 和 F' ⊣ G'，且 F ≅ F'，则 G ≅ G'）

6. 描述 Ab 范畴中的积和余积

### 挑战题

7. **探索**：阅读更多关于米田引理的内容，思考它在层论中的应用。

---

## 本章小结

| 概念 | 定义 | 例子 |
|------|------|------|
| 范畴 | 对象 + 态射 + 复合 | Set, Group, Ring |
| 单态射 | 左可消的态射 | 单射 |
| 满态射 | 右可消的态射 | 满射 |
| 同构 | 双向可逆的态射 | 双射 |
| 函子 | 范畴之间的保持结构映射 | 忘却函子、自由函子 |
| 自然变换 | 函子之间的态射 | Hom 函子间 |
| 伴随 | 特殊的函子对 | 自由-忘却 |
| 极限 | 图表的通用锥 | 积、纤维积 |
| 余极限 | 图表的通用余锥 | 余积、推出 |

---

## 下一步

下一章我们将学习**层论**——这是代数几何最核心的工具之一！

准备好了吗？让我们继续！🚀

---

*练习答案见附录*
